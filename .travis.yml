language: node_js
node_js: 
  - "node"

branches:
  only:
    - master
    - gh-pages

install:
  - git config remote.origin.fetch +refs/heads/*:refs/remotes/origin/*
  - git fetch --unshallow --tags

script:
  - yarn build
  - cp -r build ../
  - git checkout -t origin/gh-pages
  - rm -rf !(.*)
  - cp -r ../build/* ./
  - git add .
  - git commit -m "build by travis"
  - git push